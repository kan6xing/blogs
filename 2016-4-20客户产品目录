---
title: 2016-4-20客户产品目录
tags: 生成
grammar_cjkRuby: true
---


产品 和 物料特性关联   ----产品有物料特性的找出来

与产品销售区域关联    ----产品有销售区域的找出来

与品牌关联      ------找出所有有品牌的产品

物料特性类别    ---------和物料特性关联。

客户品牌（准销品牌）----通过品牌关联  找出产品有品牌并和客户品牌关联的

筛选  **产品销售区域 在经销商销售区域内的**

**产品特性  是品牌的的**

**客户品牌属于特定客户的**

认证信息：
并且  产品ID 不在
（
	物料特性.物料ID from
	(
		可用的产品认证信息的ID  不在（
			产品认证信息<发证国家，id> 关联 产品认证与国家关系表<国家,证书类别>
		）
		并且发证国家 = 客户的国家
	)
	连接
	物料特性表 行转列
	
	on 物料特性 和 产品认证信息匹配的。
）

连接

物料特性 行转列
on 物料ID =上面的产品物料ID 
***
## 主要逻辑
1.   **产品销售区域 在经销商销售区域内的**
2.   **物料特性品牌 在客户品牌内的**
3.   **产品认证信息 与物料特性匹配的产品（物料）`需要认证的`，并且关联了(产品认证与国家关系表)`已经认证的`。**
4.   **排除掉需认证并已认证的，而且产品认证信息的发证国家=客户的国家的 这些产品（物料），不能包括在客户产品目录中。**

## 优化方案
### 横向
1. **SAP端优化**
    1.1 
2. **中间库优化**
  2.1 物料特性 产品列 优化
3. **代码优化**

### 纵向
1. **数据视图**
2. **其它**


区域   国家   客户 送达方  送达方的国家  区域  销售组织 物料  

根据国家关联 证书要求。 证书中有多个证书   有证书要求  ----要求证书的 （有多个证书）  。

贴牌  









# 客户产品目录确认逻辑
## 
* 客户找到送达方，销售组织，带出 区域（区域），国家。
* [CUSTMAT] 表  根据[KOTABNR] 904 905 906 匹配出  国家、区域 、通用 的可售物料 
* 然后根据国家匹配出[ZSDTGJZSLB]表 ，国家 证书类别  ，用国家匹配（这个国家的所有物料都需要认证）
* 证书类别 和国家  找ZMATRZINFO表  的物料  ，
* 在ZSDTGJZSLB 表中有的物料  在找ZMATRZINFO表中没有的物料   去除掉。

# 报价单问题

## 剩下问题 :
*  迁移到正式系统
*  带出区域 组织？
*  带出送达方 
*  会计期间默认月带出
*  生产工厂 加批注  组织和工厂关系？
*  报价单计算速度
*  报价单 单条新建
*  币种必填。
*  提交EIP 撤回。
*  权限分配。
*  界面优化。
*  单条记录 IE 浏览器有问题。
*  没有重量+提示

## 昨天改了：

1. 相同报价 合并延期时自动通过。
2. 报价单带不出贸易条款修复。

## 重要性及工作安排

1. 与正式系统统一、同步。1天
2. 修复单条记录，延期、复制等，   IE（不能传值）存在问题的BUG  半天 。
3. 通过售达方带出送达方 ，售达方带出过滤有问题等 修复  半天
4. 币种必填、 会计期间默认带出月、物料组带出产品类别（未建完映射，目前为了演示  只建了2个） 半天,备注到列表。
5. 界面优化  -2天 。
6. 计算时没有重量+提示

### 是否做？
6. 报价单 单条新建 -------- 可以
7. 权限分配  （谁 管理 某些区域 等）
8. 报价单模板+批注内容确认。
9.  默认带出 区域、组织。
10.  提交EIP 撤回
11.  计算速度优化等

### 报价单 报价尺度 与 **客户产品目录**验证等

* 通过  送达方、国家  对国家取白名单、关联客户准销品牌
* 关联4个表  售达方-》送达方、  国家准销品牌 、 国家准销物料  、物料  
* 要查客户准销目录  就直接查 客户下的送达方-对应的准销品牌-国家准销物料  就出来了白名单。
